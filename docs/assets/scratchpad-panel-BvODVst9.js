import{s as W}from"./chunk-DZLz74EQ.js";import{c as St,d as ct,l as Ct,s as zt}from"./jotai-CqcPj6qO.js";import{t as Ot}from"./react-cj45iF1i.js";import{Hr as f,N as At,Nr as It,St as Lt,Vr as Et,w as Ht,__tla as Mt}from"./cells-CeDLVlyC.js";import"./react-dom-BjyRIiB0.js";import"./zod-U2NFpcFA.js";import{t as nt}from"./compiler-runtime-bbSa6V1W.js";import"./_Uint8Array-D5Z9rM2X.js";import"./isSymbol-xTSywenE.js";import"./toString-CSTolK5a.js";import"./toNumber-B2sDWAxt.js";import"./toInteger-Dibvs7y1.js";import"./isArrayLikeObject-JtDUKn_v.js";import"./_getTag-D4FHE--3.js";import"./_baseIsEqual-DxkXZaQt.js";import"./merge-DfSRWBS2.js";import"./_baseSlice-B27Cqkm6.js";import"./useLifecycle-Rh0PP8AP.js";import"./_hasUnicode-CPHpt5EV.js";import"./capitalize-C7xY7zs_.js";import"./_arrayReduce-DDpPg0Qh.js";import"./type-CJyAPkYT.js";import"./_baseProperty-CIKnF2iY.js";import"./now-B6JN1xKT.js";import"./debounce-DEligtiB.js";import"./tooltip-Di3J3oYn.js";import"./range-CZ1Fqm86.js";import"./client-f1mj-Vjs.js";import{d as dt}from"./hotkeys-BxvS_drY.js";import"./invariant-L2NCWzlc.js";import{v as Pt}from"./utils-BaKzT0lw.js";import"./constants-BVB3VlsI.js";import"./config-BiJechkS.js";import"./api-CpOepRkn.js";import"./globals-CMwEtzs3.js";import"./ErrorBoundary-DwXLP_VL.js";import"./useEventListener-B585XJK6.js";import{t as Rt}from"./jsx-runtime-srqCRIcI.js";import{t as X}from"./button-C3DbbTE3.js";import"./clsx-BlAkgCmw.js";import{t as Vt}from"./cn-BaXqCYqP.js";import"./dist-BhO6Skm7.js";import"./dist-nXbuW0eA.js";import{t as qt}from"./Output-C35CXkvU.js";import"./once-BumILI4b.js";import"./capabilities-DYNQ6-Fr.js";import"./cjs-Cm5h4Epc.js";import"./createReducer-Dmpo08fh.js";import{r as Dt}from"./requests-oIXZIVkS.js";import"./dist-DYRcKBTi.js";import"./dist-BIwaxZLx.js";import{t as ht}from"./createLucideIcon-DjFD6uqw.js";import{__tla as Ft}from"./layout-DyXh7lXk.js";import"./add-cell-with-ai-y1F5Z2Y5.js";import{n as Gt,t as Ut,__tla as Bt}from"./LazyAnyLanguageCodeMirror-CmIpJ80x.js";import"./ai-model-dropdown-BJLAGM8G.js";import"./table-i48JTlkp.js";import"./check-qhKOrN4z.js";import"./select-C3lT2mrt.js";import"./download-juEDJvh4.js";import"./chevron-right-GjRGzRTx.js";import"./maps-B0oHN5Qo.js";import"./circle-check-MQzCOsF2.js";import"./toDate-DvFyyQ0g.js";import"./dropdown-menu-BZzIne4N.js";import"./code-xml-DKjdQj9o.js";import"./copy-CysUGjt6.js";import{__tla as Jt}from"./dist-BY77p5Y8.js";import"./ellipsis-DUj3ofnp.js";import"./eye-off-GfTQvjwT.js";import"./types-C9Bp8jO8.js";import"./file-video-camera-Dm03euNS.js";import{t as Kt,__tla as Qt}from"./cell-editor-DIQaFfjb.js";import"./file-text-DIapyZTO.js";import"./file-GcyCxgZE.js";import"./image-DRtUduRL.js";import"./DeferredRequestRegistry-Ccjmqswm.js";import{t as Wt}from"./spinner-5y3x0_Ja.js";import"./readonly-python-code-BXa7vpHk.js";import"./MarimoErrorOutput-ffUzGr5X.js";import{r as Xt}from"./name-cell-input-Dm0PF-vI.js";import"./plus-CBaILRil.js";import"./save-Be0LCc40.js";import"./input-DLOryQh1.js";import{t as Yt}from"./ConsoleOutput-BatcZKPn.js";import"./state-D_bGND83.js";import"./trash-DVXuVt6V.js";import"./badge-Czo8nniw.js";import"./preload-helper-DrOAYyMx.js";import"./dist-0fLgeFYh.js";import"./dist-4dBKvAyu.js";import"./dist-hfg5F1cQ.js";import"./dist-BzGULjtt.js";import"./dist-Dg2hoRfc.js";import"./stex-p3EifZIQ.js";import"./Deferred-CcxW2rNb.js";import"./uuid-JSI5Ub3m.js";import"./use-toast-CRhq8yNT.js";import"./main-CJaEi7_U.js";import"./marked.esm-DI1fWf7x.js";import"./connection-9kD-dTJL.js";import{n as Zt}from"./useTheme-4lRYVxu8.js";import"./Combination-ChS5GBa2.js";import"./dist-C8L1g4FL.js";import{t as Y}from"./tooltip-DPrt9GJd.js";import"./menu-items-C-HcgP3A.js";import"./useNonce-DNmDtTkp.js";import"./en-US-ClM1rWQO.js";import"./isValid-B43jkoR_.js";import"./mode-Cy78x1lY.js";import"./alert-dialog-CxCw9oQX.js";import"./dialog-ClIOAWpQ.js";import"./usePress-B4wenCLd.js";import"./SSRProvider-iPaBBhYk.js";import"./useDateFormatter-D2bcOLFs.js";import"./context-CWS6NbZC.js";import"./useNumberFormatter-8H_iASaM.js";import"./shim-CmijwmU8.js";import"./useHotkey-BBy_zgts.js";import"./numbers-CSz2fa9C.js";import{n as Z}from"./useEvent-Cf8AdHpz.js";import"./useDebounce-BjCf8IUS.js";import"./ImperativeModal-ClGQ4GXE.js";import"./error-banner-Blvf_Trz.js";import"./vega-loader.browser-DCTaBKUs.js";import"./precisionRound-Cf6SJD9T.js";import"./defaultLocale-6gZ00BOD.js";import"./defaultLocale-UbHGVTRZ.js";import"./copy-ODI3-5mt.js";import"./copy-icon-BKJuA7HR.js";import"./RenderHTML-BdiVNqB7.js";import"./purify.es-BVYGX4Ma.js";import"./useRunCells-CXTmbRd-.js";import"./multi-map-D2K3AXi3.js";import"./emotion-is-prop-valid.esm-D6cn-CSb.js";import"./extends-EzlYz0hD.js";import"./prop-types-CHCkBeAL.js";import"./objectWithoutPropertiesLoose-CVHckof0.js";import"./alert-DY4s_wkY.js";import"./useAsyncData-CpUo9WyH.js";import"./kbd-BFNVm4a_.js";import{a as $t}from"./renderShortcut-CeCEf8EV.js";import"./dist-BlRyYfZp.js";import"./label-g86spPBc.js";import"./popover-B62m-yTZ.js";import"./cell-link-D5-sZD73.js";import"./dist-CQqxjtPE.js";import"./dist-B0W-62VK.js";import"./dist-DA4REUWb.js";import"./dist-CTnCzwDO.js";import"./dist-BeLp8J28.js";import"./dist-CT07wNjy.js";import"./dist-CcT9aH0f.js";import"./dist-Cyd6BKf3.js";import"./dist-D6YDRgIP.js";import"./dist-D2OZ4af5.js";import"./dist-Cep6eaBU.js";import"./dist-CG6nuuxF.js";import"./apl-B3qFo22I.js";import"./asciiarmor-BeSUfcJj.js";import"./asn1-Yuw4PYDQ.js";import"./brainfuck-ONQfYmGG.js";import"./cobol-CTy-rAxC.js";import"./clike-BYwnXoSp.js";import"./clojure-D0qS3s8l.js";import"./css-BWSZbBOG.js";import"./cmake-DrUW7k4w.js";import"./coffeescript-DvX85jdj.js";import"./commonlisp-rN2-4tA3.js";import"./cypher-CN0hHtlQ.js";import"./python-CV8UgSMV.js";import"./crystal-DH9HaNMr.js";import"./d-CfFhByTO.js";import"./diff-D5KX9jWB.js";import"./dtd-CAOt54Lh.js";import"./dylan-BRjSQyPa.js";import"./ecl-BFmhHLwk.js";import"./eiffel-C-yEc4lk.js";import"./elm-D-xosfDF.js";import"./erlang-DwS6VO1i.js";import"./simple-mode-iIH2XKLC.js";import"./factor-BAvqFhQd.js";import"./forth-M-b7RVCY.js";import"./fortran-BY42hR-9.js";import"./mllike-DSB5KObs.js";import"./gas-DUer3zP4.js";import"./gherkin-BOmBFtxo.js";import"./groovy-CYRk_Zq8.js";import"./haskell-fLeayyju.js";import"./haxe-DiJvQ3PF.js";import"./idl-D0PcccZ6.js";import"./javascript-oC9cmYGe.js";import"./esm-DIjo4soQ.js";import"./julia-z0xq3uqV.js";import"./livescript-BbVvVfSY.js";import"./lua-CtEmKXsU.js";import"./mirc-Cyycx3am.js";import"./mathematica-B-SjlQIm.js";import"./modelica-DIZcE54y.js";import"./mumps-Cnu1tNUa.js";import"./mbox-BdnWvTJv.js";import"./nsis-BjqFSJO3.js";import"./ntriples-2rre165b.js";import"./octave-C7u5CeUZ.js";import"./oz-D5aE2uST.js";import"./pascal-DTApZM3o.js";import"./perl-Ckgh9LJK.js";import"./pig-jAl9a1Kh.js";import"./powershell-C_IKzlOl.js";import"./properties-BdVxDpDJ.js";import"./protobuf-DLu_SUI6.js";import"./pug-B4oU-GIl.js";import"./puppet-CShRizHW.js";import"./q-D2OTJZH4.js";import"./r-DRqIAgj1.js";import"./rpm-BStFD27m.js";import"./ruby-C37hkPS4.js";import"./sas-CCEIl8BG.js";import"./scheme-B0jflgrk.js";import"./shell-Cq7B0hFW.js";import"./sieve-DS0lS4kt.js";import"./smalltalk-HHM53Uii.js";import"./sparql-BMqtnWzI.js";import"./stylus-Br2gMpMI.js";import"./swift-BJ8qi_zI.js";import"./verilog-MmKxT9bW.js";import"./tcl-D0knbOX7.js";import"./textile-DrRQSuh3.js";import"./toml-C2kDGfZi.js";import"./troff-2dFxqWQa.js";import"./ttcn-Cj4sIofh.js";import"./ttcn-cfg-CBXajWEo.js";import"./turtle-CDdPtp5F.js";import"./webidl-D9f20BkN.js";import"./vb-CtEhAMYU.js";import"./vbscript-B0nzdgzL.js";import"./velocity-DR7TSall.js";import"./vhdl-0jJrpQNA.js";import"./xquery-B0eSGN9q.js";import"./yacas-BS613OH9.js";import"./z80-CJYC52xh.js";import"./mscgen-MISBZbzR.js";import"./dist-D-fgvVNt.js";import"./esm-DHSHWgjO.js";import"./links-hfBoJmYS.js";import"./useIframeCapabilities-Bl5E4Sdk.js";import{__tla as Tt}from"./lazy-C9W0-DeZ.js";import"./tabs-BLJxco2q.js";import{o as tr}from"./focus-KxLnFZmO.js";import"./table-C2UxG4br.js";import"./formats-Dr-5EPUQ.js";import"./katex-DBEwDXZO.js";import"./add-missing-import-C21Sf8A6.js";import"./blob-BW6MxaEk.js";import"./useDeleteCell-Bc3t2abM.js";import"./icons-CiJ1mek2.js";import"./useAddCell-BiyTaqjl.js";import"./switch-C9lQcGwc.js";import"./floating-outline-BNbDM0Mz.js";import"./dist-BWJJsKLv.js";import"./TinyCode-Dp8B4Jh2.js";import"./useSplitCell-Dl0gABWO.js";import"./Inputs-CfP7ZSJJ.js";import"./constants-Cr01DWSl.js";import{__tla as rr}from"./loro_wasm_bg-B-4bet6S.js";import"./ws-BweuGjuK.js";import"./useInterval-g-DJDrRr.js";import{t as or}from"./kiosk-mode-D4EQxT1V.js";let ft,ir=Promise.all([(()=>{try{return Mt}catch{}})(),(()=>{try{return Ft}catch{}})(),(()=>{try{return Bt}catch{}})(),(()=>{try{return Jt}catch{}})(),(()=>{try{return Qt}catch{}})(),(()=>{try{return Tt}catch{}})(),(()=>{try{return rr}catch{}})()]).then(async()=>{var ut=ht("eraser",[["path",{d:"M21 21H8a2 2 0 0 1-1.42-.587l-3.994-3.999a2 2 0 0 1 0-2.828l10-10a2 2 0 0 1 2.829 0l5.999 6a2 2 0 0 1 0 2.828L12.834 21",key:"g5wo59"}],["path",{d:"m5.082 11.09 8.828 8.828",key:"1wx5vj"}]]),_t=ht("history",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]),xt=W(nt(),1),$=W(Ot(),1),vt=15;const T=It("marimo:scratchpadHistory:v1",[],Lt),gt=ct(!1),jt=ct(null,(t,m,e)=>{if(e=e.trim(),!e)return;let a=t(T);m(T,[e,...a.filter(u=>u!==e)].slice(0,vt))});var r=W(Rt(),1),yt={hide_code:!1,disabled:!1};const bt=()=>{var lt;let t=(0,xt.c)(84),m=At(),[e]=Pt(),{theme:a}=Zt(),u=(0,$.useRef)(null),tt=tr(),{createNewCell:rt,updateCellCode:_}=Ht(),{sendRunScratchpad:x}=Dt(),p=m.cellRuntime[f],ot=p==null?void 0:p.output,v=p==null?void 0:p.status,it=p==null?void 0:p.consoleOutputs,i=((lt=m.cellData.__scratch__)==null?void 0:lt.code)??"",mt=Ct(jt),[o,s]=zt(gt),g=St(T),P;t[0]!==mt||t[1]!==i||t[2]!==x?(P=()=>{x({code:i}),mt(i)},t[0]=mt,t[1]=i,t[2]=x,t[3]=P):P=t[3];let j=Z(P),R;t[4]!==i||t[5]!==rt||t[6]!==tt?(R=()=>{i.trim()&&rt({code:i,before:!1,cellId:tt??"__end__"})},t[4]=i,t[5]=rt,t[6]=tt,t[7]=R):R=t[7];let E=Z(R),V;t[8]!==x||t[9]!==_?(V=()=>{_({cellId:f,code:"",formattingChange:!1}),x({code:""});let d=u.current;d&&d.dispatch({changes:{from:0,to:d.state.doc.length,insert:""}})},t[8]=x,t[9]=_,t[10]=V):V=t[10];let H=Z(V),q;t[11]!==s||t[12]!==_?(q=d=>{s(!1),_({cellId:f,code:d,formattingChange:!1});let h=u.current;h&&h.dispatch({changes:{from:0,to:h.state.doc.length,insert:d}})},t[11]=s,t[12]=_,t[13]=q):q=t[13];let M=Z(q),[et,wt]=(0,$.useState)(),y,b,w,N,l,c,n;if(t[14]!==i||t[15]!==it||t[16]!==H||t[17]!==E||t[18]!==j||t[19]!==M||t[20]!==g||t[21]!==o||t[22]!==et||t[23]!==ot||t[24]!==s||t[25]!==v||t[26]!==a||t[27]!==e){let d=()=>(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"overflow-auto shrink-0 max-h-[40%]",children:(0,r.jsx)(Kt,{theme:a,showPlaceholder:!1,id:f,code:i,config:yt,status:"idle",serializedEditorState:null,runCell:j,userConfig:e,editorViewRef:u,setEditorView:Q=>{u.current=Q},hidden:!1,showHiddenCode:dt.NOOP,languageAdapter:et,setLanguageAdapter:wt})}),(0,r.jsx)("div",{className:"flex-1 overflow-auto shrink-0",children:(0,r.jsx)(qt,{allowExpand:!1,output:ot,className:"output-area",cellId:f,stale:!1,loading:!1})}),(0,r.jsx)("div",{className:"overflow-auto shrink-0 max-h-[35%]",children:(0,r.jsx)(Yt,{consoleOutputs:it,className:"overflow-auto",stale:!1,cellName:"_",onSubmitDebugger:dt.NOOP,cellId:f,debuggerActive:!1})})]}),h;t[35]!==M||t[36]!==g||t[37]!==o||t[38]!==a?(h=()=>o?(0,r.jsx)("div",{className:"absolute inset-0 z-100 bg-background p-3 border-none overflow-auto",children:(0,r.jsx)("div",{className:"overflow-auto flex flex-col gap-3",children:g.map((Q,kt)=>(0,r.jsx)("div",{className:"border rounded-md hover:shadow-sm cursor-pointer hover:border-input overflow-hidden",onClick:()=>M(Q),children:(0,r.jsx)($.Suspense,{children:(0,r.jsx)(Ut,{language:"python",theme:a,basicSetup:{highlightActiveLine:!1,highlightActiveLineGutter:!1},value:Q.trim(),editable:!1,readOnly:!0})})},kt))})}):null,t[35]=M,t[36]=g,t[37]=o,t[38]=a,t[39]=h):h=t[39];let Nt=h;N="flex flex-col h-full overflow-hidden divide-y",t[40]===Symbol.for("react.memo_cache_sentinel")?(l=Et.create(f),c=(0,r.jsx)("p",{className:"mx-2 my-2 text-muted-foreground text-sm",children:"Use this scratchpad cell to experiment with code without restrictions on variable names. Scratchpad code is ephemeral: variables defined in the scratchpad aren't saved to notebook memory, and the code is not saved in the notebook file."}),t[40]=l,t[41]=c):(l=t[40],c=t[41]);let F;t[42]===Symbol.for("react.memo_cache_sentinel")?(F=$t("cell.run"),t[42]=F):F=t[42];let G;t[43]===Symbol.for("react.memo_cache_sentinel")?(G=(0,r.jsx)(Xt,{color:"var(--grass-11)",size:16}),t[43]=G):G=t[43];let S;t[44]!==j||t[45]!==o?(S=(0,r.jsx)(Y,{content:F,children:(0,r.jsx)(X,{"data-testid":"scratchpad-run-button",onClick:j,disabled:o,variant:"text",size:"xs",children:G})}),t[44]=j,t[45]=o,t[46]=S):S=t[46];let U;t[47]===Symbol.for("react.memo_cache_sentinel")?(U=(0,r.jsx)(ut,{size:16}),t[47]=U):U=t[47];let C;t[48]!==H||t[49]!==o?(C=(0,r.jsx)(Y,{content:"Clear code and outputs",children:(0,r.jsx)(X,{disabled:o,size:"xs",variant:"text",onClick:H,children:U})}),t[48]=H,t[49]=o,t[50]=C):C=t[50];let B;t[51]===Symbol.for("react.memo_cache_sentinel")?(B=(0,r.jsx)(Gt,{size:16}),t[51]=B):B=t[51];let z;t[52]!==E||t[53]!==o?(z=(0,r.jsx)(or,{children:(0,r.jsx)(Y,{content:"Insert code",children:(0,r.jsx)(X,{disabled:o,size:"xs",variant:"text",onClick:E,children:B})})}),t[52]=E,t[53]=o,t[54]=z):z=t[54];let O;t[55]===v?O=t[56]:(O=(v==="running"||v==="queued")&&(0,r.jsx)(Wt,{className:"inline",size:"small"}),t[55]=v,t[56]=O);let J;t[57]===Symbol.for("react.memo_cache_sentinel")?(J=(0,r.jsx)("div",{className:"flex-1"}),t[57]=J):J=t[57];let pt=o&&"bg-(--sky-3) rounded-none",A;t[58]===pt?A=t[59]:(A=Vt(pt),t[58]=pt,t[59]=A);let I;t[60]!==o||t[61]!==s?(I=()=>s(!o),t[60]=o,t[61]=s,t[62]=I):I=t[62];let at=g.length===0,K;t[63]===Symbol.for("react.memo_cache_sentinel")?(K=(0,r.jsx)(_t,{size:16}),t[63]=K):K=t[63];let L;t[64]!==A||t[65]!==I||t[66]!==at?(L=(0,r.jsx)(Y,{content:"Toggle history",children:(0,r.jsx)(X,{size:"xs",variant:"text",className:A,onClick:I,disabled:at,children:K})}),t[64]=A,t[65]=I,t[66]=at,t[67]=L):L=t[67],t[68]!==S||t[69]!==C||t[70]!==z||t[71]!==O||t[72]!==L?(n=(0,r.jsxs)("div",{className:"flex items-center shrink-0",children:[S,C,z,O,J,L]}),t[68]=S,t[69]=C,t[70]=z,t[71]=O,t[72]=L,t[73]=n):n=t[73],b="flex-1 divide-y relative overflow-hidden flex flex-col",w=d(),y=Nt(),t[14]=i,t[15]=it,t[16]=H,t[17]=E,t[18]=j,t[19]=M,t[20]=g,t[21]=o,t[22]=et,t[23]=ot,t[24]=s,t[25]=v,t[26]=a,t[27]=e,t[28]=y,t[29]=b,t[30]=w,t[31]=N,t[32]=l,t[33]=c,t[34]=n}else y=t[28],b=t[29],w=t[30],N=t[31],l=t[32],c=t[33],n=t[34];let k;t[74]!==y||t[75]!==b||t[76]!==w?(k=(0,r.jsxs)("div",{className:b,children:[w,y]}),t[74]=y,t[75]=b,t[76]=w,t[77]=k):k=t[77];let D;return t[78]!==k||t[79]!==N||t[80]!==l||t[81]!==c||t[82]!==n?(D=(0,r.jsxs)("div",{className:N,id:l,children:[c,n,k]}),t[78]=k,t[79]=N,t[80]=l,t[81]=c,t[82]=n,t[83]=D):D=t[83],D};let st;st=W(nt(),1),ft=()=>{let t=(0,st.c)(1),m;return t[0]===Symbol.for("react.memo_cache_sentinel")?(m=(0,r.jsx)(bt,{}),t[0]=m):m=t[0],m}});export{ir as __tla,ft as default};
